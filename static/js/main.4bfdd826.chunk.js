(this["webpackJsonpmovie-recommender"]=this["webpackJsonpmovie-recommender"]||[]).push([[0],{10:function(e,t,a){e.exports=a.p+"static/media/loading.3a9eb038.png"},13:function(e,t,a){e.exports=a(24)},18:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),i=a.n(s),o=(a(18),a(1)),c=a(2),l=a(4),m=a(3),u=(a(8),a(5),function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).hoverChange=function(t){e.setState({hover:t})},e.state={hover:"false"},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{onMouseOver:function(){e.hoverChange("true")},onMouseOut:function(){e.hoverChange("false")}},this.props.children),r.a.createElement("div",{className:"bg-black-80 white f6 ba br2 b--black pa2",style:{display:"true"===this.state.hover?"block":"none",position:"fixed",width:"160px",zIndex:20}},this.props.tip))}}]),a}(n.Component)),h=a(6),p=a.n(h),d=function(e){var t=e.Id,a=e.Title,n=e.rating,s=e.ratings,i=e.Year,o=e.Genre,c=e.onMovieClick,l=e.routeChange;return null!==a.match(/^[/"][0-9a-zA-Z:. ]+,[0=9a-zA-Z:. ]+[/"]$/)&&(a=a.slice(1,-1).split(", ")[1]+" "+a.slice(1,-1).split(", ")[0]),r.a.createElement("div",{key:t,className:"tc bg-light-green dib my-card br3 pa3 ma2 grow bw2 shadow-5 pointer",id:"main_".concat(t),onClick:function(){c({Id:t,Title:a,rating:n,ratings:s,Year:i,Genre:o}),l("similarmovies")}},r.a.createElement("div",{id:"sub_".concat(t)},r.a.createElement(u,{tip:a},r.a.createElement("h2",{className:"text-ellipsis",id:"title_".concat(t)},a)),r.a.createElement("p",{id:"year_".concat(t)},i),r.a.createElement(u,{tip:o},r.a.createElement("p",{className:"text-ellipsis",id:"genre_".concat(t)},o)),r.a.createElement("div",{className:"flex justify-between",id:"sub2_".concat(t)},r.a.createElement("div",{className:"flex justify-start justify-items-center pa2 ",id:"sub3_".concat(t)},r.a.createElement("span",{className:"f7 pt",id:"rating_".concat(t)},n)),r.a.createElement("div",{className:"flex justify-end justify-items-center pa2",id:"sub4_".concat(t)},r.a.createElement("img",{id:"icon_".concat(t),src:p.a,alt:"",height:"15px",width:"auto"}),r.a.createElement("span",{id:"ratings_".concat(t),className:"f7 pt pl1"},s)))))},g=a(10),f=a.n(g),v=function(){return r.a.createElement("div",null,r.a.createElement("img",{className:"my-spin-loader",src:f.a,alt:"",width:"70px",height:"70px"}))},b=function(e){var t=e.movies,a=e.classes,n=e.onMovieClick,s=e.routeChange,i=t.map((function(e){var t=e.Id,a=e.Title,i=e.Genre,o=e.Year,c=e.ratings,l=e.avg;return r.a.createElement(d,{Id:t,Title:a,rating:l,ratings:c,Year:o,Genre:i,onMovieClick:n,routeChange:s})}));return r.a.createElement("div",null,t.length>0?r.a.createElement("div",{className:a},i):r.a.createElement(v,null))},E=function(e){var t=e.routeChange,a=e.genre,n=e.genreChange,s=e.navigation,i=e.route;return r.a.createElement("div",{className:"flex justify-between pl3 pr3 tc"},r.a.createElement("h2",null,a),r.a.createElement("p",{className:"link f6 blue dim dib pointer",id:a,onClick:function(){t(i),n(a)}},s))},C=function(e){var t=e.movies;return r.a.createElement("div",null,r.a.createElement("span",{className:"tc justify-items-center pa3"},t))},k=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={movies:[]},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this;"Similar to"===this.props.genre.slice(0,10)&&this.props.movieId!==e.movieId&&fetch("https://ts-recommender-api-11798.herokuapp.com/similarmovies/".concat(this.props.movieId)).then((function(e){return e.json()})).then((function(e){return t.setState({movies:e})}))}},{key:"componentDidMount",value:function(){var e=this;"popularmovies"===this.props.genre?fetch("https://ts-recommender-api-11798.herokuapp.com/".concat(this.props.genre)).then((function(e){return e.json()})).then((function(t){return e.setState({movies:t})})).catch((function(e){alert("Failed to load the data. Please check your internet connection and try again after sometime")})):"recommendations"===this.props.genre?this.props.isSignedIn?fetch("https://ts-recommender-api-11798.herokuapp.com/".concat(this.props.genre,"/").concat(this.props.userId)).then((function(e){return e.json()})).then((function(t){return e.setState({movies:t})})).catch((function(e){alert("Failed to load the data. Please check your internet connection and try again after sometime")})):this.setState({movies:"Please login and rate some movies to get recommendations"}):"Similar to"===this.props.genre.slice(0,10)?fetch("https://ts-recommender-api-11798.herokuapp.com/similarmovies/".concat(this.props.movieId)).then((function(e){return e.json()})).then((function(t){return e.setState({movies:t})})).catch((function(e){alert("Failed to load the data. Please check your internet connection and try again after sometime")})):fetch("https://ts-recommender-api-11798.herokuapp.com/movies/".concat(this.props.genre)).then((function(e){return e.json()})).then((function(t){return e.setState({movies:t.results})})).catch((function(e){alert("Failed to load the data. Please check your internet connection and try again after sometime")}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E,{routeChange:this.props.routeChange,genre:this.props.genre,genreChange:this.props.genreChange,navigation:"See All",route:this.props.genre}),"Please rate the movies as per your interest to start seeing the movies recommended by our system"===this.state.movies[0]||"No sufficient ratings"===this.state.movies[0]||"Please login and rate some movies to get recommendations"===this.state.movies?r.a.createElement(C,{movies:this.state.movies}):r.a.createElement(b,{movies:this.state.movies,classes:"my-h-scroll",onMovieClick:this.props.onMovieClick,routeChange:this.props.routeChange}))}}]),a}(n.Component),w=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={genredmovies:[]},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;"popularmovies"===this.props.genre?fetch("https://ts-recommender-api-11798.herokuapp.com/".concat(this.props.genre)).then((function(e){return e.json()})).then((function(t){return e.setState({genredmovies:t})})):"recommendations"===this.props.genre?this.props.isSignedIn?fetch("https://ts-recommender-api-11798.herokuapp.com/".concat(this.props.genre,"/").concat(this.props.userId)).then((function(e){return e.json()})).then((function(t){return e.setState({genredmovies:t})})):this.setState({genredmovies:"Please login and rate some movies to get recommendations"}):"Similar to"===this.props.genre.slice(0,10)?fetch("https://ts-recommender-api-11798.herokuapp.com/similarmovies/".concat(this.props.movieId)).then((function(e){return e.json()})).then((function(t){return e.setState({genredmovies:t})})):fetch("https://ts-recommender-api-11798.herokuapp.com/movies/".concat(this.props.genre)).then((function(e){return e.json()})).then((function(t){return e.setState({genredmovies:t.results})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E,{routeChange:this.props.routeChange,genre:this.props.genre,genreChange:this.props.genreChange,navigation:"Back",route:"Similar to"===this.props.genre.slice(0,10)?"similarmovies":"home"}),"Please rate the movies as per your interest to start seeing the movies recommended by our system"===this.state.genredmovies[0]||"No sufficient ratings"===this.state.genredmovies[0]||"Please login and rate some movies to get recommendations"===this.state.genredmovies?r.a.createElement(C,{movies:this.state.genredmovies}):r.a.createElement("div",{className:"my-v-scroll"},r.a.createElement(b,{movies:this.state.genredmovies,classes:"tc dib",onMovieClick:this.props.onMovieClick,routeChange:this.props.routeChange})))}}]),a}(n.Component),y=function(e){var t=e.movie,a=e.routeChange,n=e.genreChange,s=e.onMovieClick,i=e.userId,o=e.isSignedIn;return r.a.createElement("div",null,r.a.createElement("div",{className:"tc bg-light-green br3 pa3 ma2 bw2 shadow-5",id:t.Id},r.a.createElement("div",null,r.a.createElement("div",{className:"flex justify-between"},r.a.createElement("p",{className:"f6 dib black-80 bg-animate hover-bg-black hover-white no-underline pv2 ph4 br-pill ba b--black-20 pointer",onClick:function(){a("home")}},"Back to Home"),r.a.createElement("h2",null,t.Title),r.a.createElement("p",{className:"f6 dib black-80 bg-animate hover-bg-black hover-white no-underline pv2 ph4 br-pill ba b--black-20 pointer",onClick:function(){a("rate")}},"Rate movie")),r.a.createElement("p",null,t.Year),r.a.createElement("p",null,t.Genre),r.a.createElement("div",{className:"flex justify-between"},r.a.createElement("p",null,t.rating),r.a.createElement("div",{className:"flex justify-end justify-items-center pa2"},r.a.createElement("img",{src:p.a,alt:"",height:"20px",width:"auto"}),r.a.createElement("span",{className:"pt pl1"},t.ratings))))),r.a.createElement(k,{userId:i,genre:"Similar to "+t.Title,routeChange:a,genreChange:n,movieId:t.Id,onMovieClick:s,isSignedIn:o}))},S=a(11),N=a.n(S),A=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={rating:0},e}return Object(c.a)(a,[{key:"onRateOk",value:function(){var e=this;fetch("https://ts-recommender-api-11798.herokuapp.com/rateMovie/usr/".concat(this.props.userId,"/movie/").concat(this.props.movieId,"/rating/").concat(this.state.rating),{method:"POST"}).then((function(e){return e.json()})).then((function(t){"Success"===t[0]?e.props.routeChange("similarmovies"):alert("Unkown Error! Try again after sometime")}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"ml5 mr5 br3 bg-light-green bw2 mv6 tc justify-center shadow-5 pa3"},r.a.createElement("p",{className:"f4"},"How well did you like the movie?"),r.a.createElement("p",{className:"f6 mr2"},this.props.Title),r.a.createElement("div",{className:"flex justify-center"},r.a.createElement(N.a,{count:5,onChange:function(t){e.setState({rating:t})},size:24,isHalf:!0,emptyIcon:r.a.createElement("i",{className:"far fa-star"}),halfIcon:r.a.createElement("i",{className:"fa fa-star-half-alt"}),fullIcon:r.a.createElement("i",{className:"fa fa-star"}),activeColor:"#ffd700"})),r.a.createElement("div",{className:"flex justify-center"},this.props.isSignedIn?r.a.createElement("p",{className:"f6 mr2 dib black-80 bg-animate hover-bg-black hover-white no-underline pv2 ph4 br-pill ba b--black-20 pointer",onClick:function(){e.onRateOk()}},"Ok"):r.a.createElement("p",null),r.a.createElement("p",{className:"f6 ml2 dib black-80 bg-animate hover-bg-black hover-white no-underline pv2 ph4 br-pill ba b--black-20 pointer",onClick:function(){e.props.routeChange("similarmovies")}},"Cancel")))}}]),a}(n.Component),j=function(e){var t=e.isSignedIn,a=e.userType,n=e.route,s=e.routeChange,i=e.userAuth;return r.a.createElement("nav",{className:"flex-grow pa flex items-center justify-end bb b--white-10 bg-black my-top"},"home"!==n?r.a.createElement("p",{onClick:function(){s("home")},className:"f6 link dib white dim mr3 mr4-ns pointer"},"Home"):r.a.createElement(r.a.Fragment,null),"search"!==n?r.a.createElement("p",{onClick:function(){s("search")},className:"f6 link dib white dim mr3 mr4-ns pointer"},"Search"):r.a.createElement(r.a.Fragment,null),"Admin"===a&&t&&"admin"!==n?r.a.createElement("p",{onClick:function(){s("admin")},className:"f6 link dib white dim mr3 mr4-ns pointer"},"Admin"):r.a.createElement(r.a.Fragment,null),t?r.a.createElement(r.a.Fragment,null):r.a.createElement("p",{onClick:function(){s("signin")},className:"f6 link dib white dim mr3 mr4-ns pointer"},"Sign In"),t?r.a.createElement(r.a.Fragment,null):r.a.createElement("p",{onClick:function(){s("signup")},className:"f6 dib white bg-animate hover-bg-white hover-black no-underline pv2 ph4 br-pill ba b--white-20 pointer"},"Sign Up"),t?r.a.createElement("p",{onClick:function(){i(!1),s("signin")},className:"f6 dib white bg-animate hover-bg-white hover-black no-underline pv2 ph4 br-pill ba b--white-20 pointer"},"Sign Out"):r.a.createElement(r.a.Fragment,null))},O=function(e){var t=e.errors;return r.a.createElement("span",{className:"red mb3 bg-black hover-bg-red hover-black f6"},t)},x=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).onEmailChange=function(t){e.setState({email:t.target.value})},e.onPasswordChange=function(t){e.setState({password:t.target.value})},e.authenticateUser=function(){e.setState({errors:""}),fetch("https://floating-reaches-01708.herokuapp.com/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.state.email,password:e.state.password})}).then((function(e){return e.json()})).then((function(t){"Invalid Email or Password"===t||"Error Logging in. Please check your network and try again"===t?e.setState({errors:t}):(e.props.userAuth(!0),e.props.getUser(t),e.props.routeChange("home"))})).catch(alert)},e.state={email:"",password:"",errors:""},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.routeChange;return r.a.createElement("article",{className:"br2 ba bg-light-green dark-gray b--black-10 mv6 w-100 w-50-m w-25-l mw6 center shadow-5"},r.a.createElement("main",{className:"pa4 black-80"},r.a.createElement("div",{className:"measure center"},r.a.createElement("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0"},r.a.createElement("legend",{className:"f3 fw6 ph0 mh0 center"},"Sign In"),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"email-address"},"Email"),r.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"email",name:"email-address",id:"email-address",onChange:this.onEmailChange})),r.a.createElement("div",{className:"mv3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"password",onChange:this.onPasswordChange}))),r.a.createElement(O,{errors:this.state.errors}),r.a.createElement("div",{className:"my-center flex justify-between mt3"},r.a.createElement("input",{className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Sign in",onClick:this.authenticateUser}),r.a.createElement("p",{className:"f6 link dim black db pointer",onClick:function(){e("signup")}},"Sign up")))))}}]),a}(n.Component),P=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).onNameChange=function(t){t.target.value.trim().length<=0?e.setState({nameError:"Name cannot be empty\r\nAll spaces are not allowed"}):e.setState({name:t.target.value,nameError:""})},e.onEmailChange=function(t){t.target.value.trim().length<=0?e.setState({emailError:"Email cannot be empty\r\nAll spaces are not allowed"}):null===t.target.value.match(/^[a-zA-Z0-9.]+@([a-zA-Z]+\.[a-zA-Z]{2,})$/)?e.setState({emailError:"Invalid email format"}):e.setState({email:t.target.value,emailError:""})},e.onPasswordChange=function(t){t.target.value.trim().length<=8&&(null===t.target.value.match(/[^a-zA-Z0-9]+/)||null===t.target.value.match(/[0-9]+/)||null===t.target.value.match(/[A-Z]+/)||null===t.target.value.match(/[a-z]+/))?e.setState({passwordError:"Please enter a secure password with more than 8 characters having atleast one special character, one Upper case, one Lower case letter and a digit"}):t.target.value.trim().length<=8?e.setState({passwordError:"Password should contain more than 8 characters"}):null===t.target.value.match(/[^a-zA-Z0-9]+/)||null===t.target.value.match(/[0-9]+/)||null===t.target.value.match(/[A-Z]+/)||null===t.target.value.match(/[a-z]+/)?e.setState({passwordError:"Password should contain atleast one special character, one Upper case, one Lower case letter and a digit"}):e.setState({password:t.target.value,passwordError:""})},e.onSignUp=function(){e.setState({errors:""}),""===e.state.nameError&&""===e.state.emailError&&""===e.state.passwordError?fetch("https://floating-reaches-01708.herokuapp.com/signup",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({name:e.state.name,email:e.state.email,password:e.state.password})}).then((function(e){return e.json()})).then((function(t){"The email already exists."===t?e.setState({errors:t}):(e.props.userAuth(!0),e.props.getUser(t),e.props.routeChange("home"))})).catch((function(e){alert(e+"\r\nServer could be down due to maintanance.\r\nTry again after sometime.\r\nElse try after troubleshooting your network connection")})):alert("All fields are mandatory. Please fill!")},e.state={name:"",email:"",password:"",nameError:"",emailError:"",passwordError:""},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("article",{className:"br2 ba bg-light-green dark-gray b--black-10 mv6 w-100 w-50-m w-25-l mw6 center shadow-5"},r.a.createElement("main",{className:"pa4 black-80"},r.a.createElement("div",{className:"measure center"},r.a.createElement("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0"},r.a.createElement("legend",{className:"f4 fw6 ph0 mh0 center"},"Sign Up"),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"user-name"},"Name*"),r.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"text",name:"user-name",id:"user-name",onChange:this.onNameChange}),r.a.createElement(O,{errors:this.state.nameError})),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"email-address"},"Email*"),r.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"email",name:"email-address",id:"register-email-address",onChange:this.onEmailChange}),r.a.createElement(O,{errors:this.state.emailError})),r.a.createElement("div",{className:"mv3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"password"},"Password*"),r.a.createElement("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"register-password",onChange:this.onPasswordChange}),r.a.createElement(O,{errors:this.state.passwordError}))),r.a.createElement(O,{errors:this.state.errors}),r.a.createElement("div",{className:"flex justify-center mt3"},r.a.createElement("input",{className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Sign Up",onClick:this.onSignUp})))))}}]),a}(n.Component),M=function(e){return r.a.createElement("div",{className:"my-v-scroll"},e.children)},I=function(e){var t=e.searchChange,a=e.loadResults;return r.a.createElement("div",{className:"pa2"},r.a.createElement("input",{className:"pa3 ba b--green bg-lightest-blue",type:"search",placeholder:"type and click enter",onChange:t,onKeyPress:function(e){"Enter"===e.key&&a()}}))},R=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).loadResults=function(){e.state.searchfield.length>=3&&fetch("https://ts-recommender-api-11798.herokuapp.com/search/".concat(e.state.searchfield)).then((function(e){return e.json()})).then((function(t){return e.setState({robots:t.results})}))},e.onSearch=function(t){e.setState({searchfield:t.target.value})},e.state={robots:[],searchfield:""},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"tc"},r.a.createElement(I,{searchChange:this.onSearch,loadResults:this.loadResults}),"No Results Found"===this.state.robots[0]?r.a.createElement("div",{style:{paddingTop:"22vh"}},r.a.createElement("h3",{className:"f2"},"No Results Found")):0===this.state.robots.length?r.a.createElement("div",null,r.a.createElement("h3",{className:"pa3 f6"},'Enter seach text in search bar and press "Enter" to view results')):r.a.createElement(M,null,r.a.createElement(b,{movies:this.state.robots,classes:"tc dib",onMovieClick:this.props.onMovieClick,routeChange:this.props.routeChange})))}}]),a}(n.Component),U=function(e){var t=e.Options,a=e.active,n=e.onOptionSelected,s=t.map((function(e){var t={listStyle:"none",paddingTop:"10px",paddingLeft:"10px",paddingBottom:"10px",borderRadius:"5px"},s={width:"5px",height:"auto",marginLeft:"auto",backgroundColor:"green",color:"green",display:"none"};return e===a&&(t.backgroundColor="lightslategray",s.display="inline-block"),r.a.createElement("li",{style:t,className:"flex justify-between pointer",onClick:function(){n(e)},key:e},r.a.createElement("span",null,e),r.a.createElement("div",{style:s},"|"))}));return r.a.createElement("ul",{style:{width:"15vw",height:"90vh",backgroundColor:"lightseagreen",textAlign:"left",paddingLeft:"0%",margin:"0%",borderRadius:"5px"}},s)},F=a(12),T=function(e){var t=e.contents,a=e.onOptionClick,s=Object(n.useState)(""),i=Object(F.a)(s,2),o=i[0],c=i[1],l=t[0],m=[];for(var u in l)Object.hasOwnProperty.call(l,u)&&m.push(u);var h=m.map((function(e){return r.a.createElement("th",{style:{padding:"5px"},key:e,className:"table-headers-cells"},e)})),p=t.map((function(e){var t=[];for(var n in e)if(Object.hasOwnProperty.call(e,n)){var s=e[n];t.push(s)}var i=t.map((function(e){return r.a.createElement("td",{style:{padding:"5px"},key:e,className:"table-cells"},e)}));return r.a.createElement("tr",{key:Object.hasOwnProperty.call(e,"name")?e.name:e.Id,className:"table-contents"},i,Object.hasOwnProperty.call(e,"email")?r.a.createElement("td",{className:"table-row-options",style:{padding:"5px"}},r.a.createElement("div",{className:"pointer dib",onClick:function(){o!==e.email?c(e.email):c("")}},"...")):r.a.createElement(r.a.Fragment,null),Object.hasOwnProperty.call(e,"email")&&o===e.email?r.a.createElement("div",{style:{position:"absolute",right:"50px",marginTop:"30px"}},r.a.createElement("span",{className:"pointer",style:{borderRadius:"5px",backgroundColor:"lightseagreen",padding:"5px",zIndex:5},onClick:function(){a(e.email,e.role),c("")}},"User"===e.role?"Make Admin":"Remove as Admin")):r.a.createElement(r.a.Fragment,null))}));return r.a.createElement("table",{className:"center",style:{borderCollapse:"collapse",width:"85vw"}},r.a.createElement("thead",null,r.a.createElement("tr",{className:"table-headers"},h)),r.a.createElement("tbody",null,p))},L=function(e){var t=e.action,a=e.takeAction;return r.a.createElement("span",{style:{backgroundColor:"lightsteelblue",marginTop:"auto",marginBottom:"auto",padding:"5px",borderRadius:"5px",fontWeight:"500"},className:"pull-right pointer grow",onClick:a},t)},Y=function(e){var t=e.totalRecords,a=e.pageLimit,n=e.onPageSelect,s=e.onPageLimitChange,i=e.currentPage,o=Math.ceil(t/a),c=Array.from({length:o},(function(e,t){return t+1})).filter((function(e){return(e<=i+2||e<=5)&&(e>=i-2||e>o-5)})).map((function(e){return r.a.createElement("span",{className:"pointer",key:e,style:e==i?{padding:"5px",borderRadius:"50%",backgroundColor:"gray",color:"white"}:{padding:"5px",borderRadius:"50%"},onClick:function(){n(e)}},e)})),l=i;return r.a.createElement("div",{className:"flex justify-between mt2 pa3"},r.a.createElement("div",{className:"flex justify-start"},r.a.createElement("span",{className:"f6 pt1 pr2"},"Page:"),r.a.createElement("input",{type:"number",style:{width:"40px"},defaultValue:l,onChange:function(e){l=e.target.value<=o?e.target.value:o},onKeyPress:function(e){"Enter"===e.key&&n(l<=o?l:o)}}),r.a.createElement("button",{className:"bg-transparent bn pointer",onClick:function(){n(1)},disabled:1==i},"<<"),r.a.createElement("button",{className:"bg-transparent bn pointer",onClick:function(){n(i-1)},disabled:1==i},"<"),r.a.createElement("div",{style:{display:"flex",width:"fit-content"},className:"ml2 mr2 display-scroll-none"},c),r.a.createElement("button",{className:"bg-transparent bn pointer",onClick:function(){n(i+1)},disabled:i*a>=t},">"),r.a.createElement("button",{className:"bg-transparent bn pointer",onClick:function(){n(o)},disabled:i*a>=t},">>")),r.a.createElement("div",null,r.a.createElement("span",{className:"f6 pt1 pr2"},"".concat((i-1)*a+1," - ").concat(i*a>t?t:i*a," of ").concat(t)),r.a.createElement("select",{name:"Numrecords",id:"dropdown_num_records",defaultValue:a,onChange:s},r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"20"},"20"),r.a.createElement("option",{value:"50"},"50"),r.a.createElement("option",{value:"100"},"100"))))},B=function(e){return e.modalState?r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-inner br2 ba dark-gray b--black-10 mv6 w-100 mw6 center shadow-5"},r.a.createElement("button",{className:"modal-close-btn bg-transparent pointer",onClick:function(){e.toggle()}},"X"),e.children)):""},G=function(e){return r.a.createElement("article",{className:"br2 ba bg-light-green dark-gray b--black-10 w-100 center shadow-5"},r.a.createElement("main",{className:"pa4 black-80"},r.a.createElement("div",{className:"measure center"},e.children,r.a.createElement("div",{className:"my-center flex justify-between mt3"},r.a.createElement("input",{className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Create",onClick:e.onFormSubmit}),r.a.createElement("input",{className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Cancel",onClick:e.toggle})))))},z=function(e){var t=e.toggle,a=e.setMovieTitle,n=e.setMovieGenre,s=e.setMovieYear,i=e.onFormSubmit;return r.a.createElement(G,{toggle:t,onFormSubmit:i},r.a.createElement("fieldset",{id:"create_movie",className:"ba b--transparent ph0 mh0"},r.a.createElement("legend",{className:"f3 fw6 ph0 mh0 center"},"Create Movie"),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"text"},"Title"),r.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"text",name:"title",id:"title",onChange:a})),r.a.createElement("div",{className:"mv3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"text"},"Genre"),r.a.createElement("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"text",name:"genre",id:"genre",onChange:n})),r.a.createElement("div",{className:"mv3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"text"},"Year"),r.a.createElement("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"text",name:"year",id:"year",onChange:s}))))},D=function(e){return e.toasterState?r.a.createElement("div",{className:"toaster"},r.a.createElement("span",{className:"f6 pa1 white"},e.message),r.a.createElement("span",{className:"f6 pa1 green pointer",onClick:function(){e.toggle()}},"X")):""},H=function(e){var t=e.legend,a=e.label,n=e.onConfirmation;return r.a.createElement("div",{style:{backgroundColor:"lightseagreen",padding:"5px",borderRadius:"5px"}},r.a.createElement("legend",{className:"f4 fw6 ph0 mh0 center black-80"},t),r.a.createElement("br",null),r.a.createElement("label",{className:"db fw6 lh-copy f6 black-80",htmlFor:"user-name"},a),r.a.createElement("div",{className:"flex justify-end mt3"},r.a.createElement("input",{className:"b ph3 pv2 input-reset ba b--black bg-light-blue grow pointer f6 dib",type:"submit",value:"Confirm",onClick:n})))},Z=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).loadResults=function(){e.state.searchfield.trim().length>=3?(e.setState({currentPage:1}),"Users"===e.state.activeOption?fetch("https://floating-reaches-01708.herokuapp.com/users?offset=".concat((e.state.currentPage-1)*e.state.pageLimit,"&limit=").concat(e.state.pageLimit,"&search=").concat(e.state.searchfield)).then((function(e){return e.json()})).then((function(t){e.setState({tableContent:t.results,totalRecords:t.totalRecords})})).catch((function(e){alert("Unkown error occured while fetching users")})):fetch("https://ts-recommender-api-11798.herokuapp.com/movies?offset=".concat((e.state.currentPage-1)*e.state.pageLimit+1,"&limit=").concat(e.state.pageLimit,"&search=").concat(e.state.searchfield)).then((function(e){return e.json()})).then((function(t){e.setState({tableContent:t.results,totalRecords:t.totalRecords[0]})})).catch((function(e){alert("Unknown error occured while fetching users")}))):"Users"===e.state.activeOption?fetch("https://floating-reaches-01708.herokuapp.com/users?offset=".concat((e.state.currentPage-1)*e.state.pageLimit,"&limit=").concat(e.state.pageLimit)).then((function(e){return e.json()})).then((function(t){e.setState({tableContent:t.results,totalRecords:t.totalRecords})})).catch((function(e){alert("Unkown error occured while fetching users")})):fetch("https://ts-recommender-api-11798.herokuapp.com/movies?offset=".concat((e.state.currentPage-1)*e.state.pageLimit+1,"&limit=").concat(e.state.pageLimit)).then((function(e){return e.json()})).then((function(t){e.setState({tableContent:t.results,totalRecords:t.totalRecords[0]})})).catch((function(e){alert("Unknown error occured while fetching users")}))},e.onSearch=function(t){e.setState({searchfield:t.target.value})},e.onOptionSelected=function(t){e.setState({activeOption:t})},e.onPageSelect=function(t){e.setState({currentPage:t})},e.onPageLimitChange=function(t){e.setState({pageLimit:t.target.value,currentPage:1})},e.toggleModalState=function(){e.setState({modalState:!e.state.modalState})},e.setMovieTitle=function(t){e.setState({movieTitle:t.target.value})},e.setMovieGenre=function(t){e.setState({movieGenre:t.target.value})},e.setMovieYear=function(t){e.setState({movieYear:t.target.value})},e.createMovie=function(){fetch("https://ts-recommender-api-11798.herokuapp.com/createMovie?title=".concat(e.state.movieTitle,"&genre=").concat(e.state.movieGenre,"&year=").concat(e.state.movieYear),{method:"POST"}).then((function(e){return e.json()})).then((function(t){e.toggleModalState(),e.setState({movieCreationStatus:t[0]}),e.toggleToasterState()})).catch((function(e){alert("Unknown error occured while fetching users")})).finally(e.setState({movieTitle:"",movieGenre:"",movieYear:""}))},e.toggleToasterState=function(){e.setState({toasterState:!e.state.toasterState})},e.toggleConfirmationPopupState=function(){e.setState({confirmationPopupState:!e.state.confirmationPopupState})},e.setOptionClickedFor=function(t,a){e.setState({optionClickedFor:{email:t,role:a}}),e.toggleConfirmationPopupState()},e.changeAccess=function(){fetch("https://floating-reaches-01708.herokuapp.com/change-role",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.state.optionClickedFor.email,role:"User"===e.state.optionClickedFor.role?"Admin":"User"})}).then((function(e){return e.json()})).then((function(t){e.setState({movieCreationStatus:t}),e.toggleConfirmationPopupState(),e.toggleToasterState()})).catch((function(e){alert("Unkown Error occured")}))},e.state={tableContent:[],activeOption:"Users",searchfield:"",totalRecords:0,currentPage:1,pageLimit:10,modalState:!1,movieTitle:"",movieGenre:"",movieYear:"",movieCreationStatus:"",toasterState:!1,confirmationPopupState:!1,optionClickedFor:""},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;"Users"===this.state.activeOption?fetch("https://floating-reaches-01708.herokuapp.com/users?offset=".concat((this.state.currentPage-1)*this.state.pageLimit,"&limit=").concat(this.state.pageLimit)).then((function(e){return e.json()})).then((function(t){e.setState({tableContent:t.results,totalRecords:t.totalRecords})})).catch((function(e){alert("Unkown error occured while fetching users")})):fetch("https://ts-recommender-api-11798.herokuapp.com/movies?offset=".concat((this.state.currentPage-1)*this.state.pageLimit+1,"&limit=").concat(this.state.pageLimit)).then((function(e){return e.json()})).then((function(t){e.setState({tableContent:t.results,totalRecords:t.totalRecords[0]})})).catch((function(e){alert("Unknown error occured while fetching users")}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;t.activeOption===this.state.activeOption&&t.pageLimit===this.state.pageLimit&&t.currentPage===this.state.currentPage&&t.movieCreationStatus===this.state.movieCreationStatus||("Users"===this.state.activeOption?fetch("https://floating-reaches-01708.herokuapp.com/users?offset=".concat((this.state.currentPage-1)*this.state.pageLimit,"&limit=").concat(this.state.pageLimit,"&search=").concat(this.state.searchfield)).then((function(e){return e.json()})).then((function(e){a.setState({tableContent:e.results,totalRecords:e.totalRecords})})).catch((function(e){alert("Unkown error occured while fetching users")})):fetch("https://ts-recommender-api-11798.herokuapp.com/movies?offset=".concat((this.state.currentPage-1)*this.state.pageLimit+1,"&limit=").concat(this.state.pageLimit,"&search=").concat(this.state.searchfield)).then((function(e){return e.json()})).then((function(e){a.setState({tableContent:e.results,totalRecords:e.totalRecords[0]})})).catch((function(e){alert("Unknown error occured while fetching users")})))}},{key:"render",value:function(){return r.a.createElement("div",{className:"flex"},r.a.createElement(U,{Options:["Users","Movies"],active:this.state.activeOption,onOptionSelected:this.onOptionSelected}),r.a.createElement("div",{style:{width:"100%",height:"100%"}},r.a.createElement("div",{className:"flex justify-end tc"},r.a.createElement("div",{style:{width:"50vw",display:"flex"}},r.a.createElement(I,{searchChange:this.onSearch,loadResults:this.loadResults}),"Movies"===this.state.activeOption?r.a.createElement(L,{action:"Create Movie",takeAction:this.toggleModalState}):r.a.createElement(r.a.Fragment,null))),r.a.createElement(B,{modalState:this.state.modalState,toggle:this.toggleModalState},r.a.createElement(z,{toggle:this.toggleModalState,setMovieTitle:this.setMovieTitle,setMovieGenre:this.setMovieGenre,setMovieYear:this.setMovieYear,onFormSubmit:this.createMovie})),r.a.createElement(D,{toasterState:this.state.toasterState,toggle:this.toggleToasterState,message:this.state.movieCreationStatus}),0==this.state.totalRecords?r.a.createElement("div",{className:"tc",style:{height:"70vh",paddingTop:"22vh"}},r.a.createElement("h3",{className:"f2"},"No Results Found")):r.a.createElement("div",{className:"table-scroll tc"},r.a.createElement(T,{contents:this.state.tableContent,onOptionClick:this.setOptionClickedFor})),r.a.createElement(B,{modalState:this.state.confirmationPopupState,toggle:this.toggleConfirmationPopupState},r.a.createElement(H,{legend:"Confirmation required",label:"Are you sure to change access for user with email ".concat(this.state.optionClickedFor.email),onConfirmation:this.changeAccess})),r.a.createElement(Y,{totalRecords:this.state.totalRecords,pageLimit:this.state.pageLimit,onPageSelect:this.onPageSelect,onPageLimitChange:this.onPageLimitChange,currentPage:this.state.currentPage})))}}]),a}(n.Component),V=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).userAuth=function(t){e.setState({isSignedIn:t}),t||e.setState({user:{}})},e.routeChange=function(t){e.setState({route:t})},e.genreChange=function(t){e.setState({genre:t})},e.onMovieClick=function(t){e.setState({movie:t})},e.getUser=function(t){e.setState({user:t})},e.state={route:"home",genre:"",movie:{},isSignedIn:!1,user:{}},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=["recommendations","popularmovies","Action","Comedy","Adventure","Sci-Fi","Thriller","Horror","Drama","Mystery"].map((function(t){return r.a.createElement(k,{userId:e.state.user.id,genre:t,routeChange:e.routeChange,genreChange:e.genreChange,onMovieClick:e.onMovieClick,isSignedIn:e.state.isSignedIn})}));return r.a.createElement("div",null,r.a.createElement(j,{isSignedIn:this.state.isSignedIn,userType:this.state.user.role,route:this.state.route,routeChange:this.routeChange,userAuth:this.userAuth}),"home"===this.state.route?r.a.createElement("div",null,t):"similarmovies"===this.state.route?r.a.createElement(y,{movie:this.state.movie,routeChange:this.routeChange,genreChange:this.genreChange,onMovieClick:this.onMovieClick,userId:this.state.user.id,isSignedIn:this.state.isSignedIn}):"rate"===this.state.route?r.a.createElement(A,{Title:this.state.movie.Title,movieId:this.state.movie.Id,routeChange:this.routeChange,userId:this.state.user.id,isSignedIn:this.state.isSignedIn}):"signin"===this.state.route?r.a.createElement(x,{routeChange:this.routeChange,getUser:this.getUser,userAuth:this.userAuth}):"signup"===this.state.route?r.a.createElement(P,{routeChange:this.routeChange,getUser:this.getUser,userAuth:this.userAuth}):"search"===this.state.route?r.a.createElement(R,{onMovieClick:this.onMovieClick,routeChange:this.routeChange}):"admin"===this.state.route?r.a.createElement(Z,null):r.a.createElement(w,{routeChange:this.routeChange,genre:this.state.genre,genreChange:this.genreChange,userId:this.state.user.id,onMovieClick:this.onMovieClick,movieId:this.state.movie.Id,isSignedIn:this.state.isSignedIn}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA7AAAAOwBeShxvQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIeSURBVFiF7Zc/S1xBFMV/eYlI4lq4CoLaCfkC0VRaBEFbDbGyEiy0M98gQdFOEZFIyiVYWSVVUAjkA5gmxL+gJCCKoO6uGxVdtZg72clz5u28+LaKFw6z7D1z7pl5l3nz4D7ixwPgFbAE7Ak+Ay8lV9F4BCwA1w58AB5W0sBERHGNsUoVrwfOPAz8Bup8RQPjdwqYBrYEU0CNkX8BVHtoPhaury6gmmeZ26tZotRYI5a8CyMxdAHojBDrEE5fDAO9vrr6ETwNb4kROvcF9XzLRUG4XrrawGoE8YeMx8Ckh4EJIBtD90984vY2fQxxAuC9hacxz9+N7asLqA5/C3wTvMHd9T3AIqXOXgS6Hdw4uv9x1AMzwDZwKNhANVTK4KWB16gu3wWKwDlwAKwA40CjwU+hGnfT0N1GHUxpTWqQYram2jEE+4F9B89EDhiQOY2iYeOty8J55yAUgXYRGgWuPIprXAHDMve5aNl4c6De57ZkRgQ6IgSicAE8E42Mg7NLxMr0Efz1H4prLBuLcO2UNVFAXSxa7lBcP8Zm0crbOOFTS8eaTG5z5H0joNQDmy6CLY5lbLijAYAmGbO2pMtATsbaBAxUhTS9DJzK+CQBA2FNLwP6/+sEDVhvywHqHHCRLxM0YFvsrwAYQnX9kYGCEM4TKFyUMR+q8R0YLDc56k7ni66oAuW+Yn4CJ0Ar6hZ75ok86gU3S+lIvw9r3ADFpUX+dTxdrwAAAABJRU5ErkJggg=="},8:function(e,t,a){}},[[13,1,2]]]);
//# sourceMappingURL=main.4bfdd826.chunk.js.map